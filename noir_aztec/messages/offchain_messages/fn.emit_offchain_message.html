<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="../../../styles.css">
<title>Function emit_offchain_message documentation</title>
</head>
<body>
<nav class="sidebar">
<h1><a href="../../../index.html">aztec-nr</a></h1><div><a href="../../../all.html">All items</a></div>
<h2>In module offchain_messages</h2><h3>Functions</h3><ul class="item-list"><li><a href="fn.emit_offchain_message.html" class="fn">emit_offchain_message</a></div></li>
</ul><h3>Globals</h3><ul class="item-list"><li><a href="global.OFFCHAIN_MESSAGE_IDENTIFIER.html" class="global">OFFCHAIN_MESSAGE_IDENTIFIER</a></div></li>
</ul></nav>
<main>
<div><a href="../../../index.html">aztec-nr</a> - <a href="../../index.html">noir_aztec</a>::<a href="../index.html">messages</a>::<a href="index.html">offchain_messages</a></div><h1>Function <span class="fn">emit_offchain_message</span></h1><pre><code>pub fn emit_offchain_message&lt;T&gt;(message: T, recipient: AztecAddress)
where
    T: Serialize&lt;N = &lt;T as Serialize&gt;::N&gt;
</code></pre>

<div class="comments">
<p>Emits a message that will be delivered off-chain rather than through the data availability layer.</p>
<p>Sends data through an alternative app-specific channel without incurring data availability (DA) costs. After
receiving the message, the recipient is expected to call the <code>process_message</code> function implemented on the
contract that originally emitted the message.</p>
<h2>Example use case</h2>
<p>A typical use case would be a payment app where the notes and events do not need to be delivered via DA because
the payment is considered successful by the recipient once he receives the notes and events off-chain. Hence
having the guaranteed delivery via DA is not necessary.</p>
<h2>When not to use</h2>
<p>This function should not be used when an on-chain guarantee of successful delivery is required. This is the case
when a smart contract (rather than a person) needs to make decisions based on the message. For example, consider
a contract that escrows a privately-stored NFT (i.e. an NFT represented by a note) and releases it to a buyer only
after receiving a payment in a specific token. Without on-chain delivery, the buyer could potentially obtain the
NFT without sending the payment token message (the note hash preimage) to the seller, rugging the seller.</p>
<p>To clarify the above, while the malicious buyer's payment token would still be deducted from their balance, they
would obtain the NFT while the seller would be unable to spend the payment token, keeping the payment token note
in limbo.</p>
<h2>Arguments</h2>
<ul>
<li><code>message</code> - The message to emit.</li>
<li><code>recipient</code> - The address of the recipient.</li>
</ul>
</div>
</main>
</body>
</html>
