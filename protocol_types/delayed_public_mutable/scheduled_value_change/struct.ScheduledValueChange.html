<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="../../../styles.css">
<title>Struct ScheduledValueChange documentation</title>
</head>
<body>
<nav class="sidebar">
<h1><a href="../../../index.html">aztec-nr</a></h1>
<div><a href="../../../all.html">All items</a></div>
<h2><a href="#struct">Struct ScheduledValueChange</a></h2>
<h3>Methods</h3>
<ul class="sidebar-list">
<li><a href="#get_current_at">get_current_at</a></li>
<li><a href="#get_previous">get_previous</a></li>
<li><a href="#get_scheduled">get_scheduled</a></li>
<li><a href="#get_time_horizon">get_time_horizon</a></li>
<li><a href="#new">new</a></li>
<li><a href="#schedule_change">schedule_change</a></li>
</ul>
<h3>Trait implementations</h3>
<ul class="sidebar-list">
<li><a href="#impl-Empty-for-ScheduledValueChange<T>">Empty</a></li>
<li><a href="#impl-Eq-for-ScheduledValueChange<T>">Eq</a></li>
</ul>
<h2>In module scheduled_value_change</h2>
<h3>Structs</h3><ul class="item-list">
<li><a href="struct.ScheduledValueChange.html" class="struct">ScheduledValueChange</a></div></li>
</ul>
</nav>
<main>
<div><a href="../../../index.html">aztec-nr</a> - <a href="../../index.html">protocol_types</a>::<a href="../index.html">delayed_public_mutable</a>::<a href="index.html">scheduled_value_change</a></div>
<h1>Struct <span id="struct" class="struct">ScheduledValueChange</span></h1>
<pre><code>pub struct ScheduledValueChange&lt;T&gt;
{ <span class="comment">/* private fields */</span> }
</code></pre>
<h2>Implementations</h2>
<h3><code class="code-header">impl&lt;T&gt; <a href="../../../protocol_types/delayed_public_mutable/scheduled_value_change/struct.ScheduledValueChange.html" class="struct">ScheduledValueChange</a>&lt;T&gt;</code></h3>

<div class="padded-methods"><code id="new" class="code-header">pub fn <span class="fn">new</span>(pre: T, post: T, timestamp_of_change: <a href="../../../std/primitive.u64.html" class="primitive">u64</a>) -> Self</code>

<code id="get_current_at" class="code-header">pub fn <span class="fn">get_current_at</span>(self, timestamp: <a href="../../../std/primitive.u64.html" class="primitive">u64</a>) -> T</code>

<div class="padded-description"><div class="comments">
<p>Returns the value stored in the data structure at a given timestamp. This function can be called both in public
(where <code>timestamp</code> is simply the current timestamp, i.e. the timestamp at which the current transaction will be
included) and in private (where <code>timestamp</code> is the historical timestamp that is used to construct the proof).
Reading in private is only safe if the transaction's <code>include_by_timestamp</code> property is set to a value lower or
equal to the time horizon (see <code>get_time_horizon()</code>).</p>
</div>
</div><code id="get_scheduled" class="code-header">pub fn <span class="fn">get_scheduled</span>(self) -> (T, <a href="../../../std/primitive.u64.html" class="primitive">u64</a>)</code>

<div class="padded-description"><div class="comments">
<p>Returns the scheduled change, i.e. the post-change value and the timestamp at which it will become the current
value. Note that this timestamp may be in the past if the change has already taken place.
Additionally, further changes might be later scheduled, potentially canceling the one returned by this function.</p>
</div>
</div><code id="get_previous" class="code-header">pub fn <span class="fn">get_previous</span>(self) -> (T, <a href="../../../std/primitive.u64.html" class="primitive">u64</a>)</code>

<code id="get_time_horizon" class="code-header">pub fn <span class="fn">get_time_horizon</span>(self, historical_timestamp: <a href="../../../std/primitive.u64.html" class="primitive">u64</a>, minimum_delay: <a href="../../../std/primitive.u64.html" class="primitive">u64</a>) -> <a href="../../../std/primitive.u64.html" class="primitive">u64</a></code>

<div class="padded-description"><div class="comments">
<p>Returns the largest timestamp at which the value returned by <code>get_current_at</code> is known to remain the current
value. This value is only meaningful in private when constructing a proof at some <code>historical_timestamp</code>
(timestamp of a historical block at which we are constructing a proof), since due to its asynchronous nature
private execution cannot know about any later scheduled changes.
The caller of this function must know how quickly the value can change due to a scheduled change in the form of
<code>minimum_delay</code>. If the delay itself is immutable, then this is just its duration. If the delay is mutable
however, then this value is the 'effective minimum delay' (obtained by calling
<code>ScheduledDelayChange.get_effective_minimum_delay_at</code>), which equals the minimum time in seconds that needs to
elapse from the next block's timestamp until the value changes, regardless of further delay changes.
The value returned by <code>get_current_at</code> in private when called with a historical timestamp is only safe to use
if the transaction's <code>include_by_timestamp</code> property is set to a value lower or equal to the time horizon
computed using the same historical timestamp.</p>
</div>
</div><code id="schedule_change" class="code-header">pub fn <span class="fn">schedule_change</span>(
    &mut self,
    new_value: T,
    current_timestamp: <a href="../../../std/primitive.u64.html" class="primitive">u64</a>,
    minimum_delay: <a href="../../../std/primitive.u64.html" class="primitive">u64</a>,
    timestamp_of_change: <a href="../../../std/primitive.u64.html" class="primitive">u64</a>,
)</code>

<div class="padded-description"><div class="comments">
<p>Mutates the value by scheduling a change at the current timestamp. This function is only meaningful when
called in public with the current timestamp.</p>
</div>
</div></div><h2>Trait implementations</h2>
<h3 id="impl-Empty-for-ScheduledValueChange<T>"><code class="code-header">impl&lt;T&gt; <a href="../../../protocol_types/traits/trait.Empty.html" class="trait">Empty</a> for <a href="../../../protocol_types/delayed_public_mutable/scheduled_value_change/struct.ScheduledValueChange.html" class="struct">ScheduledValueChange</a>&lt;T&gt;
<div class="where-clause">where
    T: <a href="../../../protocol_types/traits/trait.Empty.html" class="trait">Empty</a></div></code></h3>

<div class="padded-methods"><code class="code-header">pub fn <span class="fn">empty</span>() -> Self</code>

<code class="code-header">pub fn <span class="fn">is_empty</span>(self) -> <a href="../../../std/primitive.bool.html" class="primitive">bool</a></code>

<code class="code-header">pub fn <span class="fn">assert_empty</span>&lt;let S: <a href="../../../std/primitive.u32.html" class="primitive">u32</a>&gt;(self, msg: <a href="../../../std/primitive.str.html" class="primitive">str</a>&lt;S&gt;)</code>

</div><h3 id="impl-Eq-for-ScheduledValueChange<T>"><code class="code-header">impl&lt;T&gt; <a href="../../../std/cmp/trait.Eq.html" class="trait">Eq</a> for <a href="../../../protocol_types/delayed_public_mutable/scheduled_value_change/struct.ScheduledValueChange.html" class="struct">ScheduledValueChange</a>&lt;T&gt;
<div class="where-clause">where
    T: <a href="../../../std/cmp/trait.Eq.html" class="trait">Eq</a></div></code></h3>

<div class="padded-methods"><code class="code-header">pub fn <span class="fn">eq</span>(self, other: Self) -> <a href="../../../std/primitive.bool.html" class="primitive">bool</a></code>

</div></main>
</body>
</html>
